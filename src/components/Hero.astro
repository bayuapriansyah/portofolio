<section
  class="min-h-[60vh] flex flex-col items-center justify-center text-center lg:mt-10 mt-20 mb-32"
  id="home"
>
  <div id="hero-avatar" class="relative mb-10 opacity-0 scale-75">
    <div
      class="w-24 h-24 rounded-full bg-gradient-to-tr from-blue-600 to-purple-600 p-1"
    >
      <div
        class="w-full h-full rounded-full bg-white dark:bg-slate-950 flex items-center justify-center overflow-hidden"
      >
        <span class="text-4xl">ðŸ‘‹</span>
      </div>
    </div>
    <div
      class="absolute -bottom-2 -right-2 glass px-3 py-1 rounded-full flex items-center gap-1.5 shadow-xl"
    >
      <span
        class="w-2 h-2 rounded-full bg-blue-600 dark:bg-blue-400 animate-pulse"
      ></span>
      <span
        class="text-[10px] font-black uppercase tracking-widest text-slate-800 dark:text-slate-200"
        >Active</span
      >
    </div>
  </div>

  <h1
    id="hero-title"
    class="text-5xl md:text-7xl font-black tracking-tighter text-slate-900 dark:text-white leading-[0.9] opacity-0 translate-y-12"
  >
    Bayu <span
      class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600 animate-gradient"
      >Apriansyah</span
    > Putra
  </h1>

  <p
    id="hero-desc"
    class="mt-8 text-lg md:text-xl text-slate-600 dark:text-slate-400 leading-relaxed max-w-xl opacity-0 translate-y-8"
  >
    Hello, I'm <span class="text-slate-900 dark:text-white font-bold"
      >Bayu Apriansyah Putra</span
    >, a Full-Stack Developer specializing in modern web solutions with Laravel
    & JavaScript.
  </p>

  <div
    class="flex flex-wrap items-center justify-center gap-4 mt-12"
    id="hero-actions"
  >
    <a
      href="https://github.com/bayuapriansyah"
      class="px-8 py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-950 font-bold rounded-2xl shadow-2xl shadow-blue-500/10 transition-all duration-300 opacity-0 translate-y-4"
    >
      View Projects
    </a>

    <a
      href="#about"
      class="px-8 py-4 glass text-slate-900 dark:text-white font-bold rounded-2xl border border-slate-200 dark:border-white/5 hover:bg-slate-50 dark:hover:bg-slate-900/50 transition-all duration-300 opacity-0 translate-y-4"
    >
      Read About Me
    </a>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { splitText, initMagnetic } from "../scripts/gsapInit";

  let mouseHandler: ((e: MouseEvent) => void) | null = null;

  const initHero = () => {
    splitText("#hero-title");
    initMagnetic("#hero-actions a");

    const tl = gsap.timeline({ defaults: { ease: "expo.out", duration: 0.8 } });

    tl.to("#hero-avatar", { opacity: 1, scale: 1, duration: 1 })
      .set("#hero-title", { opacity: 1, y: 0 })
      .fromTo(
        "#hero-title .char",
        { opacity: 0, scale: 0.5, y: 10 },
        {
          opacity: 1,
          scale: 1,
          y: 0,
          stagger: 0.19,
          duration: 0.5,
          ease: "back.out(2)",
          force3D: true,
        },
        "-=0.6",
      )
      .to("#hero-desc", { opacity: 1, y: 0 }, "-=0.2")
      .to("#hero-actions a", { opacity: 1, y: 0, stagger: 0.1 }, "-=0.4");

    const avatar = document.querySelector("#hero-avatar");
    if (avatar) {
      (avatar as HTMLElement).style.willChange = "transform";

      if (mouseHandler) {
        document.removeEventListener("mousemove", mouseHandler);
      }

      mouseHandler = (e: MouseEvent) => {
        const x = (e.clientX - window.innerWidth / 2) * 0.008;
        const y = (e.clientY - window.innerHeight / 2) * 0.008;
        gsap.to(avatar, {
          x,
          y,
          rotateY: x * 0.4,
          rotateX: -y * 0.4,
          duration: 0.6,
          force3D: true,
          ease: "power2.out",
        });
      };

      document.addEventListener("mousemove", mouseHandler);
    }
  };

  document.addEventListener("astro:page-load", initHero);
</script>

<style>
  .animate-gradient {
    background-size: 200% auto;
    animation: gradient 4s linear infinite;
  }
  @keyframes gradient {
    0% {
      background-position: 0% center;
    }
    100% {
      background-position: 200% center;
    }
  }
</style>
